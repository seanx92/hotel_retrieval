<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Traveler | Hotel</title>
	
	<!-- core CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" >
    <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}" >
    <link rel="stylesheet" href="{% static 'css/animate.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/prettyPhoto.css' %}">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>

</head><!--/head-->

<body class="homepage">
    <section id="main-slider" class="no-margin">
        <div class="carousel slide">
            <div class="carousel-inner">
                <div class="item active" style="background-image: url(static/images/bg.jpg)">
                    <div class="container">
                        <div class="row slide-margin">
                            <form class="form-inline">
                                <div class="form-group col-sm-4">
                                    <input type="text" class="search-query form-control" id = "hotel" placeholder = "Hotel" />
                                </div>
                                <div class="form-group col-sm-4">
                                    <input type="text" class="search-query form-control" id = "tags" placeholder = "Description, i.e. quiet, free breakfast, free wifi etc."/>
                                </div>
                                <div class="form-group col-sm-2">
                                    <input type="text" class="search-query form-control" id = "location" placeholder = "Location"/>
                                </div>
                                <button class="btn btn-primary" type="submit" id = "submit-button">Search</button>
                            </form>
                            <div class="carousel-content">
                                <h1 class="animation animated-item-1">Find the best Hotel for you</h1>
                                <h2 class="animation animated-item-2">all depends on your request</h2>
                            </div>
                        </div>
                    </div>
                </div><!--/.item-->
            </div><!--/.carousel-inner-->
        </div><!--/.carousel-->
    </section><!--/#main-slider-->

    <section id="recent-works" style="padding: 70px 0;">
        <div class="container">
            <div class="center wow fadeInDown">
                <h2>Top Rated Hotels Near You</h2>
            </div>

            <div class="row">
                <div class="col-xs-12 col-sm-4 col-md-3">
                    <div class="recent-work-wrap">
                        <img class="img-responsive" src="static/images/item1.jpg" alt="">
                        <div class="overlay">
                            <div class="recent-work-inner">
                                <h3><a href="#"></a>Las Vegas </h3>
                                <p></p>
                                <a class="preview" href="static/images/item1.jpg" rel="prettyPhoto"><i class="fa fa-eye"></i> View</a>
                            </div> 
                        </div>
                    </div>
                </div>   

                <div class="col-xs-12 col-sm-4 col-md-3">
                    <div class="recent-work-wrap">
                        <img class="img-responsive" src="static/images/item2.jpg" alt="">
                        <div class="overlay">
                            <div class="recent-work-inner">
                                <h3><a href="#">Business theme</a></h3>
                                <p>There are many variations of passages of Lorem Ipsum available, but the majority</p>
                                <a class="preview" href="static/images/item2.jpg" rel="prettyPhoto"><i class="fa fa-eye"></i> View</a>
                            </div> 
                        </div>
                    </div>
                </div> 

                <div class="col-xs-12 col-sm-4 col-md-3">
                    <div class="recent-work-wrap">
                        <img class="img-responsive" src="static/images/item3.jpg" alt="">
                        <div class="overlay">
                            <div class="recent-work-inner">
                                <h3><a href="#">Business theme </a></h3>
                                <p>There are many variations of passages of Lorem Ipsum available, but the majority</p>
                                <a class="preview" href="images/portfolio/full/item3.png" rel="prettyPhoto"><i class="fa fa-eye"></i> View</a>
                            </div> 
                        </div>
                    </div>
                </div>   

                <div class="col-xs-12 col-sm-4 col-md-3">
                    <div class="recent-work-wrap">
                        <img class="img-responsive" src="static/images/item4.jpg" alt="">
                        <div class="overlay">
                            <div class="recent-work-inner">
                                <h3><a href="#">Business theme </a></h3>
                                <p>There are many variations of passages of Lorem Ipsum available, but the majority</p>
                                <a class="preview" href="images/portfolio/full/item4.png" rel="prettyPhoto"><i class="fa fa-eye"></i> View</a>
                            </div> 
                        </div>
                    </div>
                </div>   
                
                <div class="col-xs-12 col-sm-4 col-md-3">
                    <div class="recent-work-wrap">
                        <img class="img-responsive" src="static/images/item5.jpg" alt="">
                        <div class="overlay">
                            <div class="recent-work-inner">
                                <h3><a href="#">Business theme</a></h3>
                                <p>There are many variations of passages of Lorem Ipsum available, but the majority</p>
                                <a class="preview" href="images/portfolio/full/item5.png" rel="prettyPhoto"><i class="fa fa-eye"></i> View</a>
                            </div> 
                        </div>
                    </div>
                </div>   

                <div class="col-xs-12 col-sm-4 col-md-3">
                    <div class="recent-work-wrap">
                        <img class="img-responsive" src="static/images/item6.jpg" alt="">
                        <div class="overlay">
                            <div class="recent-work-inner">
                                <h3><a href="#">Business theme </a></h3>
                                <p>There are many variations of passages of Lorem Ipsum available, but the majority</p>
                                <a class="preview" href="images/portfolio/full/item6.png" rel="prettyPhoto"><i class="fa fa-eye"></i> View</a>
                            </div> 
                        </div>
                    </div>
                </div> 

                <div class="col-xs-12 col-sm-4 col-md-3">
                    <div class="recent-work-wrap">
                        <img class="img-responsive" src="static/images/item6.jpg" alt="">
                        <div class="overlay">
                            <div class="recent-work-inner">
                                <h3><a href="#">Business theme </a></h3>
                                <p>There are many variations of passages of Lorem Ipsum available, but the majority</p>
                                <a class="preview" href="images/portfolio/full/item6.png" rel="prettyPhoto"><i class="fa fa-eye"></i> View</a>
                            </div> 
                        </div>
                    </div>
                </div>   

                <div class="col-xs-12 col-sm-4 col-md-3">
                    <div class="recent-work-wrap">
                        <img class="img-responsive" src="static/images/item6.jpg" alt="">
                        <div class="overlay">
                            <div class="recent-work-inner">
                                <h3><a href="#">Business theme </a></h3>
                                <p>There are many variations of passages of Lorem Ipsum available, but the majority</p>
                                <a class="preview" href="images/portfolio/full/item8.png" rel="prettyPhoto"><i class="fa fa-eye"></i> View</a>
                            </div> 
                        </div>
                    </div>
                </div>   
            </div>
        </div>
    </section>

    <section id="result", style="padding: 50px 0;">
        
    </section>

    <script>
    var hotel;
    $("#submit-button").on("click", function(e){
        e.preventDefault();
        $.ajax({
            type: "POST",
            url: "/search/",
            data: {
                csrfmiddlewaretoken: "{{ csrf_token }}",
                'title': $('#hotel').val(),
                'location': $("#location").val(),
                'tags': $("#tags").val() // from form
            },
            success: function(data) {
                hotel = data;
                index = 0;
                data.forEach(function(e) {
                    console.log(e)
                    var address = e[1]["address"]
                $("#result").append(
                '<div class="container">' +
                    '<div class="row">' +
                        '<div class="col-xs-12 col-sm-8 wow fadeInDown">' +
                            '<div class="parrent media-body">' +
                                '<div class="tab-content">' +
                                     '<div class="tab-pane fade active in">' +
                                        '<div class="media">' +
                                           '<div class="pull-left">' +
                                                '<img style="height:230px; width:230px;" src=' + e[1]["image"] + '>' +
                                            '</div>' +
                                            '<div class="media-body">' +
                                                 '<h2><a class = "hotel_detail", id = "' + index + '">' + e[1]["name"]+ '</a></h2>' + 
                                                 '<p>' + e[1]["address"]["street_address"] + '</p>' +
                                                 '<p>' + e[1]["address"]["locality"] + ' | ' + e[1]["address"]["region"] + '</p>' + 
                                            '</div>' + 
                                        '</div>' +
                                     '</div>' +
                                '</div>' + 
                            '</div>' +
                        '</div>' +

                        '<div class="col-xs-12 col-sm-4 wow fadeInDown">' + 
                            '<div class="testimonial">' +
                                 '<div class="media testimonial-inner">' +
                                    '<div class="pull-left">' +
                                        '<img class="img-circle" src="static/images/user' + index + '.jpeg">' +
                                    '</div>' +
                                    '<div class="media-body">' + 
                                        '<h3><strong>' + e[1]["reviews"][0]["title"] + '</strong></h3>' + 
                                        '<p>' + e[1]["reviews"][0]["content"].split('.')[0] + '</p>' +
                                    '</div>' +
                                 '</div>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +
                '</div>'
                );
                index += 1;
                });
            }
        });
    });

    $("#result").on("click", ".hotel_detail", function(e){
      var index = e.target.getAttribute("id");
      var id = hotel[index][0];
      window.open("/hotel_id/" + id + "/");
      console.log(hotel[index])
    });
    

    </script>

    <script src="{% static 'js/jquery.prettyPhoto.js' %}"></script>
    <script src="{% static 'js/jquery.isotope.min.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script src="{% static 'js/wow.min.js' %}"></script>
    <script scr="{% static 'js/jquery.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
</body>
</html>